<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Checkout</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding payment-page-content">
  <div class="checkout-container">
    
    <h2 class="section-header">Order Summary</h2>

    <ion-list class="summary-list">
      <ion-item lines="none">
        <ion-label>Subtotal:</ion-label>
        <span slot="end">₱{{ cartService.total$ | async | number: '1.2-2' }}</span> 
      </ion-item>
      
      <ion-item lines="none">
        <ion-label>Shipping Fee:</ion-label>
        <span slot="end">₱{{ shippingFee | number: '1.2-2' }}</span> 
      </ion-item>
      
      <ion-item class="total-row">
        <ion-label>Total Amount Due:</ion-label>
        <span slot="end">₱{{ finalTotal() | number: '1.2-2' }}</span>
      </ion-item>
    </ion-list>
  
    <h3 class="section-header mt-4">Select Payment Method</h3>
    <div class="method-options space-y-3">
      
      <ion-item button detail="false" (click)="selectPayment('Credit Card')" 
                [class.selected-method]="selectedMethod() === 'Credit Card'">
        <ion-icon slot="start" name="card-outline"></ion-icon>
        <ion-label>Credit/Debit Card (Visa, Mastercard)</ion-label>
      </ion-item>
      
      <ion-item button detail="false" (click)="selectPayment('GCash')"
                [class.selected-method]="selectedMethod() === 'GCash'">
        <ion-icon slot="start" name="wallet-outline"></ion-icon>
        <ion-label>GCash / PayMaya</ion-label>
      </ion-item>
      
      <ion-item button detail="false" (click)="selectPayment('COD')"
                [class.selected-method]="selectedMethod() === 'COD'">
        <ion-icon slot="start" name="cash-outline"></ion-icon>
        <ion-label>Cash on Delivery (COD)</ion-label>
      </ion-item>
    </div>

    <ion-button 
      (click)="processPayment()"
      expand="block"
      class="pay-now-button"
      [disabled]="!selectedMethod()">
      PAY NOW (₱{{ finalTotal() | number: '1.2-2' }})
    </ion-button>
  </div>
</ion-content>